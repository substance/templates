<% if (node.image) { %>
  <div class="cover-image">
    <img src="<%= node.image %>"/>
  </div>
<% } %>
<div id="cover" class="row content-node cover">

    <div class="three columns"></div>
    <div class='six columns'>
      <div class="title"><%= annotated(['cover', 'title']) %></div>

      <!-- Article Meta like title, authors and publication date -->
      <div class="article-meta">
        <% var authors = node.document.getAuthors(); %>
        <% if (authors.length > 0) { %>
          <div class="authors">
            By
            <%
              var authorNames = node.document.getAuthors().map(function(a) {
                return '<a href="#'+a.id+'" class="author">'+a.name+'</a>';
              });
            %>
            <%= authorNames.join(" and ") %>
          </div>
        <% } %>
        <div class="published-on"><%= new Date(node.document.published_on).toDateString() %></div>
      </div>

      <!-- Article Abstract -->
      <% if (node.document.abstract) { %>
        <div class="article-abstract">
          <%= annotated(['cover', 'abstract']) %>
        </div>
      <% } %>

      <!-- Table of Contents -->
      <% 
        var headings = [];
        var doc = node.document;
        var nodes = doc.get('content').nodes;
        _.each(nodes, function(nodeId) {
          var node = doc.get(nodeId);
          if (node.type === "heading") headings.push(node);
        });
      %> 

      <% if (options.include_toc && headings.length >= 2) { %>
      <div class="toc">
        <div class="toc-title">Contents </div>
        <div class="toc-entries">
          <% _.each(headings, function(heading) { %>
            <div class="toc-entry level-<%= heading.level %>"><a href="#<%= heading.id %>"><%= heading.content %></a></div>
          <% }); %>
        </div>
      </div>
      <% } %>

    </div>
    <div class="three columns"></div>
</div>



